在遇到的情况越多后，越发现数据库其实非常的脆弱。数据库是一个非常需要保护的基础模块。

在电商秒杀等这种高并发情况下，80%的优化都是围绕保护数据库展开的。

### 服务重试导致连接池打满
一次服务上线，突然导致前端页面白页，追查后。下游服务把数据库连接池打满了。整个数据库卡死。

### 定位问题
新服务上线触发了慢查询，导致数据库响应变慢。

然后由于是微服务架构，下游等不到服务返回时，就进行3次重试，同理，这个上游的上游也等不到请求，开始了3次重试。微服务层层重试，并发不断被放大，3*3*3*3*3 导致数据库被打死。

### 总结教训
1. 数据库访问一定需要考虑限流
2. 不要信任上游服务的限流
