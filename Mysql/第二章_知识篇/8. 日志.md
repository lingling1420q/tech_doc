## 日志
日志系统在mysql使用初期阶段，其实是很容易忽视的。
因为它的存在对应我们平常的日常使用没有太大关联。但是一旦需要深入研究mysql，日志的重要性就越来越明显了。
1. 数据库的异常问题，如何保证不丢数据，
2. 首先数据库主从搭建，主从之间的数据同步，都是依靠日志模块，
3. 日志还能提高写的性能等等，

抛开数据库的分布式搭建，整个分布式系统基本都是建立在日志系统的基础上。

下面我也只能通过我的理解，简单介绍下比较浅和直白的mysql日志基础功能。

### redo log
redo log 是InnoDB 引擎特有的

#### WAL 技术
WAL 的全称是 Write-Ahead Logging，它的关键点就是先写日志，再写合适时候批量写入磁盘。

这个核心就是 ，减少随机的i/o操作（一次写入磁盘成本是很高的），操作的记录先攒在日志里面，等空闲或者达到一定数据量时，一次批量的写入磁盘。

#### crash-safe
redo log具备在数据库异常退出时，不丢数据的能力。

#### 数据结构
innodb的redo log是固定大小. 循环写的 比如可以配置为一组 4 个文件，每个文件的大小是 1GB，那么这块日志总共就可以记录 4GB 的操作。从头开始写，写到末尾就又回到开头循环写.

![](http://doc.tangguangyao.cn/media//202007/2020-07-06_142217.png)

### binlog
MySQL 的 Server 层实现的

#### 逻辑日志
主要用于记录数据库的原始操作。
主要用于数据库备份，数据库主从同步，数据库扩容等等功能。


#### 数据结构
binlog和普通日志一样，使用追加写。